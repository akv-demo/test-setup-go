name: CI

on:
  push:
  pull_request:

  workflow_dispatch:

jobs:
  find-default-go:
    runs-on: windows-latest
    outputs:
      version: ${{ steps.goversion.outputs.version }}
    steps:
      - run: |
          version=`go env GOVERSION|sed s/^go//`
          echo "default go version: $version"
          echo "version=$version" >> "$GITHUB_OUTPUT"
          cat "$GITHUB_OUTPUT"
        shell: bash
        id: goversion
        
  use-default-go:
    runs-on: windows-latest
    needs: find-default-go
    steps:
      - run: |
          echo "default go: ${{ needs.find-default-go.outputs.version}}"
        shell: bash

          
          
      - uses: actions/setup-go@v4
        if: ${{ false }}
        with:
          go-version: 1.20.5
